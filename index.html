<!DOCTYPE html>
<html>
<head>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: #f0f0f0;
      cursor: none;
      overflow: hidden;
      font-family: Arial, sans-serif;
    }
    #yarn, #cat, .cat-follower {
      position: absolute;
      pointer-events: none;
      z-index: 900;
    }
    .game-stats {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.8);
      padding: 5px 15px;
      border-radius: 20px;
    }
    .yarn-ball {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: #FF6B6B;
      border-radius: 50%;
      z-index: 800;
    }
    .obstacle {
      position: absolute;
      background-color: #666;
      border-radius: 10px;
      z-index: 700;
      opacity: 0.7;
    }
    #game-over {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 20px;
      border-radius: 10px;
      display: none;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="game-stats" class="game-stats">Yarn Balls: <span id="yarn-ball-count">0</span> | Cats: <span id="cat-count">1</span></div>
  <div id="game-over">GAME OVER<br><button onclick="resetGame()">Restart</button></div>
  
  <svg id="yarn" width="50" height="50" viewBox="0 0 100 100">
    <circle cx="50" cy="50" r="40" fill="#FF6B6B"/>
    <path d="M30 50 Q50 20 70 50" stroke="white" stroke-width="4" fill="none"/>
    <path d="M30 60 Q50 40 70 60" stroke="white" stroke-width="4" fill="none"/>
    <path d="M40 30 Q50 50 60 30" stroke="white" stroke-width="3" fill="none"/>
    <path d="M20 45 Q50 70 80 45" stroke="white" stroke-width="3" fill="none"/>
  </svg>

  <svg id="cat" width="120" height="120" viewBox="0 0 200 200">
    <ellipse cx="100" cy="120" rx="60" ry="40" fill="#4A4A4A"/>
    <circle cx="100" cy="70" r="40" fill="#4A4A4A"/>
    <path d="M70 40 L60 10 L85 35 Z" fill="#4A4A4A"/>
    <path d="M130 40 L140 10 L115 35 Z" fill="#4A4A4A"/>
    <path d="M70 40 L65 15 L80 32 Z" fill="#FFA7C4" opacity="0.8"/>
    <path d="M130 40 L135 15 L120 32 Z" fill="#FFA7C4" opacity="0.8"/>
    <ellipse cx="85" cy="65" rx="5" ry="10" fill="#FFD700"/>
    <ellipse cx="115" cy="65" rx="5" ry="10" fill="#FFD700"/>
    <ellipse cx="85" cy="65" rx="2" ry="5" fill="black"/>
    <ellipse cx="115" cy="65" rx="2" ry="5" fill="black"/>
    <path d="M97 75 L103 75 L100 80 Z" fill="#FFA7C4"/>
  </svg>

  <script>
    const yarn = document.getElementById('yarn');
    const cat = document.getElementById('cat');
    const yarnBallCountEl = document.getElementById('yarn-ball-count');
    const catCountEl = document.getElementById('cat-count');
    const gameStatsEl = document.getElementById('game-stats');
    const gameOverEl = document.getElementById('game-over');

    let mouseX = 0, mouseY = 0;
    let catX = window.innerWidth / 2, catY = window.innerHeight / 2;
    let yarnBallCount = 0, catCount = 1;
    let gameSpeed = 1;
    let lastMouseMoveTime = Date.now();
    let yarnBalls = [], obstacles = [], cats = [];
    let isGameOver = false;

    function createYarnBall() {
      const yarnBall = document.createElement('div');
      yarnBall.classList.add('yarn-ball');
      yarnBall.style.left = `${Math.random() * (window.innerWidth - 20)}px`;
      yarnBall.style.top = `${Math.random() * (window.innerHeight - 20)}px`;
      document.body.appendChild(yarnBall);
      yarnBalls.push(yarnBall);
      return yarnBall;
    }

    function createObstacle() {
      const obstacle = document.createElement('div');
      obstacle.classList.add('obstacle');
      obstacle.style.width = `${Math.random() * 50 + 20}px`;
      obstacle.style.height = `${Math.random() * 50 + 20}px`;
      obstacle.style.left = `${Math.random() * (window.innerWidth - 50)}px`;
      obstacle.style.top = `${Math.random() * (window.innerHeight - 50)}px`;
      document.body.appendChild(obstacle);
      obstacles.push(obstacle);
      return obstacle;
    }

    function createCatFollower(x, y) {
      const catFollower = cat.cloneNode(true);
      catFollower.id = '';
      catFollower.classList.add('cat-follower');
      catFollower.style.transform = `translate(${x - 60}px, ${y - 60}px)`;
      document.body.appendChild(catFollower);
      cats.push({el: catFollower, x, y});
      return catFollower;
    }

    function resetGame() {
      isGameOver = false;
      yarnBallCount = 0;
      catCount = 1;
      yarnBallCountEl.textContent = '0';
      catCountEl.textContent = '1';
      gameOverEl.style.display = 'none';
      
      yarnBalls.forEach(ball => document.body.removeChild(ball));
      obstacles.forEach(obs => document.body.removeChild(obs));
      cats.slice(1).forEach(cat => document.body.removeChild(cat.el));
      
      yarnBalls = [];
      obstacles = [];
      cats = [{el: cat, x: catX, y: catY}];
      
      for (let i = 0; i < 5; i++) createYarnBall();
      for (let i = 0; i < 3; i++) createObstacle();
      
      catX = window.innerWidth / 2;
      catY = window.innerHeight / 2;
      gameSpeed = 1;
    }

    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
      lastMouseMoveTime = Date.now();
      
      yarn.style.transform = `translate(${mouseX - 25}px, ${mouseY - 25}px)`;
    });

    function checkCollisions() {
      const mainCat = cats[0];
      
      if (Date.now() - lastMouseMoveTime > 1000) {
        gameOver();
        return;
      }

      yarnBalls.forEach((ball, index) => {
        const ballRect = ball.getBoundingClientRect();
        const catRect = mainCat.el.getBoundingClientRect();

        if (ballRect.left < catRect.right && ballRect.right > catRect.left &&
            ballRect.top < catRect.bottom && ballRect.bottom > catRect.top) {
          gameOver();
          return;
        }
      });

      obstacles.forEach(obstacle => {
        const obstacleRect = obstacle.getBoundingClientRect();
        const catRect = mainCat.el.getBoundingClientRect();

        if (obstacleRect.left < catRect.right && obstacleRect.right > catRect.left &&
            obstacleRect.top < catRect.bottom && obstacleRect.bottom > catRect.top) {
          gameOver();
          return;
        }
      });
    }

    function gameOver() {
      if (isGameOver) return;
      isGameOver = true;
      gameOverEl.style.display = 'block';
    }

    function animate() {
      if (isGameOver) return;

      const mainCat = cats[0];
      const dx = mouseX - mainCat.x;
      const dy = mouseY - mainCat.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      
      const speed = Math.min(distance * 0.1 * gameSpeed, 10);
      mainCat.x += dx * speed / distance;
      mainCat.y += dy * speed / distance;
      
      mainCat.el.style.transform = `translate(${mainCat.x - 60}px, ${mainCat.y - 60}px) ${dx > 0 ? '' : 'scale(-1,1)'}`;
      
      cats.slice(1).forEach((followerCat, index) => {
        const prevCat = index === 0 ? mainCat : cats[index];
        const dx = prevCat.x - followerCat.x;
        const dy = prevCat.y - followerCat.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance > 100) {
          const speed = Math.min(distance * 0.05, 5);
          followerCat.x += dx * speed / distance;
          followerCat.y += dy * speed / distance;
          
          followerCat.el.style.transform = `translate(${followerCat.x - 60}px, ${followerCat.y - 60}px)`;
        }
      });

      if (Math.random() < 0.01) {
        const existingYarnBalls = yarnBalls.length;
        if (existingYarnBalls < 5) {
          createYarnBall();
        }
      }

      checkCollisions();

      if (yarnBallCount > 0 && yarnBallCount % 5 === 0) {
        const newCat = createCatFollower(mainCat.x - 100, mainCat.y);
        yarnBallCount++;
        catCount++;
        yarnBallCountEl.textContent = yarnBallCount;
        catCountEl.textContent = catCount;
        gameSpeed *= 1.1;
      }

      requestAnimationFrame(animate);
    }

    resetGame();
    animate();
  </script>
</body>
</html>